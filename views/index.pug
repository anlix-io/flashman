extends layout

block content
  include includes/showsearchterms
  include includes/showdevicelogs
  include includes/configdevicefirewall
  include includes/showpingtest
  include includes/showlandevices
  include includes/showupgradescheduler

  .row.justify-content-center
    .col-12.col-lg-8.mt-4
      form#devices-search-form(action="/devicelist/search")
        .mt-4.input-group
          input.form-control.tags-input(type="tags", name="content",
                                        placeholder="Buscar...")
          .input-group-append(
            data-toggle="tooltip",
            title="Use as vírgulas para combinar os filtros desejados. (Exemplo: TP-Link, 0001-aix)"
          )
            span.input-group-text.md-addon
              .fas.fa-question-circle.fa-lg
          .input-group-btn
            button.my-0.btn.teal.lighten-2(type="submit")
              .fas.fa-search.fa-lg
        a.badge.teal.lighten-2.bounceIn(
          data-toggle="modal",
          data-target="#special-search-terms"
        )
          | Filtros Especiais &nbsp
          .fas.fa-plus-circle

  if (superuser || role.grantDeviceAdd)
    .row.justify-content-center
      .col-12.col-lg-8.mt-5
        .card
          h4.card-header.teal.lighten-2.white-text(id="card-header",
                                                    data-toggle="collapse",
                                                    data-target="#deviceCard",
                                                    style="cursor: pointer;")
            .row
              .col-1
                .fas.fa-plus
              .col-10.text-center
                span.card-title Adicionar novo roteador
          .card-body.collapse.out(id="deviceCard")
            include includes/newdeviceform

  .row.justify-content-center
    .col-12.mt-4
      .row
        .col-12.col-lg-3.offset-lg-9
          .md-form.mb-0
            .input-group
              .md-selectfield.form-control
                label Registros por página
                select.browser-default.md-select(id="input-elements-pp")
                  option(value="" disabled selected) Selecione...
                  option(value=10 selected=(elementsperpage == 10)) 10
                  option(value=50 selected=(elementsperpage == 50)) 50
                  option(value=100 selected=(elementsperpage == 100)) 100
                  option(value=250 selected=(elementsperpage == 250)) 250
                  option(value=500 selected=(elementsperpage == 500)) 500
              .input-group-btn
                button.btn.teal.lighten-2.mr-0.my-0(
                  type="button",
                  id="btn-elements-per-page") Ok
      .card
        .card-body.px-3
          .table-responsive
            table.table#devices-table
              thead
                tr.csv-export(
                  data-pass-show=(superuser || role.grantPassShow ? "true" : "false"),
                  data-deviceid="Endereço MAC",
                  data-connection-type="Tipo de Conexão WAN",
                  data-user="Usuário PPPoE",
                  data-pass="Senha PPPoE",
                  data-lan-subnet="Subrede LAN",
                  data-lan-netmask="Máscara LAN",
                  data-ssid="WiFi SSID",
                  data-wifi-pass="WiFi Senha",
                  data-channel="WiFi Canal",
                  data-band="Largura de banda",
                  data-mode="Modo de operação",
                  data-ssid-5ghz="WiFi SSID 5GHz",
                  data-wifi-pass-5ghz="WiFi Senha 5GHz",
                  data-channel-5ghz="WiFi Canal 5GHz",
                  data-band-5ghz="Largura de banda 5GHz",
                  data-mode-5ghz="Modo de operação 5GHz",
                  data-ext-wan="IP Público",
                  data-int-wan="IP WAN",
                  data-wan-speed="Velocidade WAN negociada"
                  data-wan-duplex="Modo de transmissão WAN (duplex)"
                  data-external-ref-type="Tipo de ID do cliente",
                  data-external-ref="ID do cliente",
                  data-device-model="Modelo do roteador",
                  data-device-version="Versão do Flashbox",
                  data-device-release="Release",
                  data-do-update="Atualizar Firmware"
                )
                  th
                  th
                  th.text-center
                    span Status &nbsp
                    a.fas.fa-question-circle(
                      data-toggle="tooltip",
                      title="Verde: Online\nVermelho: Instável. Sem resposta imediata\nCinza: Sem resposta por mais de 1 hora",
                    )
                  th.text-center Usuário PPPoE
                  th.text-center Endereço MAC
                  th.text-center IP WAN
                  th.text-center IP Público
                  th.text-center Firmware Instalado
                  if (superuser || role.grantFirmwareUpgrade)
                    th.text-left Atualizar Firmware
              tbody#devices-table-content(
                data-role=role,
                data-superuser=superuser ? "true" : "false")
      .row.mt-3.mb-3
        .col-md-9
          nav#devices-table-pagination
        .col-md-3
          .text-right
            button#export-csv.btn.teal.lighten-2.mr-0.my-0
              .fas.fa-file-excel.fa-lg
              span &nbsp Exportar CSV

block scripts
  script(src='/scripts/tags-input/tags-input.js')
  script(src='/socket.io/socket.io.js')
  script.
    let socket = io()
  script(src='/scripts/jquery-highlight/jquery.highlight.js')
  script(src='/scripts/pako/pako.js')
  script(src='/javascripts/device_validator.js')
  script(src='/javascripts/new_device.js')
  script(src='/javascripts/edit_device.js')
  script(src='/javascripts/edit_device_firewall.js')
  script(src='/javascripts/show_devices_logs_actions.js')
  script(src='/javascripts/show_ping_test_actions.js')
  script(src='/javascripts/show_lan_devices_actions.js')
  script(src='/javascripts/update_device.js')
  script(src='/javascripts/table_anim.js')
